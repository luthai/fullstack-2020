{"version":3,"sources":["services/persons.js","components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","components/ErrorNotification.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","then","response","data","newObject","post","id","put","delete","Person","person","deletePerson","name","number","onClick","Persons","persons","filterName","className","filter","toUpperCase","includes","map","p","key","PersonInput","text","value","onChange","PersonForm","onSubmit","newName","onNameChange","newNumber","onNumberChange","type","Filter","Notification","message","ErrorNotification","errorMessage","App","useState","setPersons","setNewName","setNewNumber","setFilterName","setMessage","setErrorMessage","useEffect","personService","initialPerson","event","target","preventDefault","found","find","undefined","window","alert","returnedPerson","concat","catch","error","setTimeout","confirm","personObject","status","personName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.89b4af70.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => getAll())\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import React from 'react'\r\n\r\nconst Persons = ({ persons, filterName, deletePerson }) => {\r\n  return (\r\n    <ul className=\"no-bullets\">\r\n      {persons.filter(person => \r\n        person.name.toUpperCase().includes(filterName.toUpperCase())).map(p => \r\n        <Person key={p.name} person={p} deletePerson={deletePerson}/>\r\n      )}\r\n    </ul>\r\n  )\r\n}\r\n\r\nconst Person = ({ person, deletePerson }) => \r\n  <li>\r\n    {person.name} {person.number}\r\n    <button onClick={() => deletePerson(person.id)}>delete</button>  \r\n  </li>\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({ onSubmit, newName, onNameChange,\r\n  newNumber, onNumberChange }) => {\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      <PersonInput \r\n        text=\"name:\"\r\n        value={newName}\r\n        onChange={onNameChange}\r\n      />\r\n      <PersonInput \r\n        text=\"number:\"\r\n        value={newNumber}\r\n        onChange={onNumberChange}\r\n      />\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst PersonInput = ({ text, value, onChange }) => {\r\n  return (\r\n    <div>\r\n      {text} \r\n      <input \r\n        value={value}\r\n        onChange={onChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = ({ text, value, onChange }) => {\r\n  return (\r\n    <form>\r\n      <div>\r\n        {text} \r\n        <input \r\n          value={value}\r\n          onChange={onChange}\r\n        />\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null)\r\n    return null\r\n  \r\n  return (\r\n    <div className='message'>\r\n      {message}\r\n    </div>\r\n  )  \r\n} \r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst ErrorNotification = ({ errorMessage }) => {\r\n  if (errorMessage === null)\r\n    return null\r\n\r\n  return (\r\n    <div className='errorMessage'>\r\n      {errorMessage}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorNotification ","import React, { useState, useEffect } from 'react'\r\nimport './App.css'\r\nimport personService from './services/persons'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport ErrorNotification from './components/ErrorNotification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filterName, setFilterName ] = useState('')\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPerson => {\r\n        setPersons(initialPerson)\r\n      })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    if (newName === '')\r\n      return null\r\n    \r\n    let found = persons.find(person => person.name === newName)\r\n    if(found === undefined) {\r\n      if (newNumber === '') {\r\n        window.alert(`Please enter a number.`)\r\n        return null    \r\n      }\r\n        \r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n  \r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setMessage(`Added ${returnedPerson.name}`)\r\n        })\r\n        .catch(error => {\r\n          const errorMessage = error.response.data\r\n          setErrorMessage(errorMessage.error)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n      \r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000) \r\n    } else {\r\n      if ((newNumber === '') || (found.number === newNumber)) {\r\n        window.alert(`${newName} is already added to phonebook`)\r\n        return null\r\n      } else {\r\n        let confirm = window.confirm(`${newName} is already added to phonebook, \r\n          replace the old number with a new one?`)\r\n        if (confirm) {\r\n          const personObject = {\r\n            name: newName,\r\n            number: newNumber\r\n          }\r\n\r\n          personService\r\n            .update(found.id, personObject)\r\n            .then(returnedPerson => {\r\n              setPersons(persons.map(person => person.id !== found.id ? person : returnedPerson))\r\n            })\r\n            .catch(error => {\r\n              if (error.response.status === 400) {\r\n                const errorMessage = error.response.data\r\n                setErrorMessage(errorMessage.error)\r\n              } else if (error.response.status === 404) {\r\n                setErrorMessage(`${found.name} was already removed from server.`)\r\n                setPersons(persons.filter(person => person.id !== found.id))\r\n              }\r\n              setTimeout(() => {\r\n                setErrorMessage(null)\r\n              }, 5000)\r\n            })\r\n        }\r\n      }     \r\n    }\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const personName = persons.find(person => person.id === id).name\r\n    if (window.confirm(`Delete ${personName}?`)) {\r\n      personService\r\n        .deletePerson(id)\r\n        .then(returnedPerson => {\r\n          setPersons(returnedPerson)\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(`${personName} was already removed from server.`)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n          setPersons(persons.filter(person => person.id !== id))\r\n        })\r\n    }    \r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterNameChange = (event) => {\r\n    setFilterName(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <ErrorNotification errorMessage={errorMessage} />\r\n      <Filter\r\n        text=\"filter shown with\"\r\n        value={filterName}\r\n        onChange={handleFilterNameChange}\r\n      />\r\n      <h3>Add a new</h3>\r\n      <PersonForm \r\n        onSubmit={addPerson}\r\n        newName={newName}\r\n        onNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        onNumberChange={handleNumberChange}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Persons\r\n        persons={persons}\r\n        filterName={filterName}\r\n        deletePerson={deletePerson}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}